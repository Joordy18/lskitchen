(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{69:(e,s,r)=>{"use strict";r.d(s,{supabase:()=>t});let t=(0,r(5647).UU)("https://uqyilcwzosapypgcchka.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVxeWlsY3d6b3NhcHlwZ2NjaGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNDc1MTAsImV4cCI6MjA2ODkyMzUxMH0.e9ollbywpv3ZH7laJVENWbkY8wNSs66N5rHg4wchvts",{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}})},285:(e,s,r)=>{"use strict";r.d(s,{$:()=>d});var t=r(5155),a=r(2115),n=r(9708),i=r(2085),l=r(9434);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:r,variant:a,size:i,asChild:d=!1,...o}=e,u=d?n.DX:"button";return(0,t.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:r})),ref:s,...o})});d.displayName="Button"},451:(e,s,r)=>{Promise.resolve().then(r.bind(r,8348))},4105:(e,s,r)=>{"use strict";r.d(s,{A:()=>c,O:()=>l});var t=r(5155),a=r(2115),n=r(69);let i=(0,a.createContext)(void 0),l=e=>{let{children:s}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let{data:{subscription:e}}=n.supabase.auth.onAuthStateChange((e,s)=>{var r;d(s),l(null!=(r=null==s?void 0:s.user)?r:null),u(!1)});return n.supabase.auth.getSession().then(e=>{var s;let{data:{session:r}}=e;d(r),l(null!=(s=null==r?void 0:r.user)?s:null),u(!1)}),()=>e.unsubscribe()},[]);let x=async(e,s)=>{let{error:r}=await n.supabase.auth.signInWithPassword({email:e,password:s});return{error:r}},m=async(e,s)=>{let r="".concat(window.location.origin,"/"),{error:t}=await n.supabase.auth.signUp({email:e,password:s,options:{emailRedirectTo:r}});return{error:t}},h=async()=>{await n.supabase.auth.signOut()};return(0,t.jsx)(i.Provider,{value:{user:r,session:c,loading:o,signIn:x,signUp:m,signOut:h},children:s})},c=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4186:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5494:(e,s,r)=>{"use strict";r.d(s,{F:()=>h});var t=r(5155),a=r(6874),n=r.n(a),i=r(5695),l=r(285),c=r(4105),d=r(744),o=r(7924),u=r(9676),x=r(1007),m=r(4835);let h=()=>{let{signOut:e,user:s}=(0,c.A)(),r=(0,i.usePathname)(),a=[{path:"/",label:"Accueil",icon:d.A},{path:"/search",label:"Recherche",icon:o.A},{path:"/history",label:"Historique",icon:u.A},{path:"/profile",label:"Profil",icon:x.A}],h=async()=>{await e()};return(0,t.jsx)("nav",{className:"bg-card border-b border-border px-6 py-4",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,t.jsxs)(n(),{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-8 w-8 text-primary"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-primary",children:"LS Kitchen"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[a.map(e=>{let{path:s,label:a,icon:i}=e;return(0,t.jsxs)(n(),{href:s,className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(r===s?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[(0,t.jsx)(i,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden md:inline",children:a})]},s)}),s?(0,t.jsxs)(l.$,{variant:"outline",size:"sm",onClick:h,className:"flex items-center space-x-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden md:inline",children:"D\xe9connexion"})]}):(0,t.jsx)(l.$,{variant:"outline",size:"sm",className:"flex items-center space-x-2",children:(0,t.jsxs)(n(),{href:"/auth",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden md:inline",children:"Connexion"})]})})]})]})})}},6126:(e,s,r)=>{"use strict";r.d(s,{E:()=>l});var t=r(5155);r(2115);var a=r(2085),n=r(9434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:r}),s),...a})}},6695:(e,s,r)=>{"use strict";r.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>l});var t=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},7580:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8348:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>v});var t=r(5155),a=r(2115),n=r(5695),i=r(285),l=r(6695),c=r(6126),d=r(5494);let o=(0,r(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var u=r(744),x=r(4186),m=r(7580),h=r(69),f=r(4105),p=r(9053);function g(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),{user:r}=(0,f.A)(),[p,g]=(0,a.useState)(null),[v,j]=(0,a.useState)(!0);(0,a.useEffect)(()=>{e.id&&r&&y()},[e.id,r]);let y=async()=>{try{let s=Array.isArray(e.id)?e.id[0]:e.id,{data:t,error:a}=await h.supabase.from("recipes").select("*").eq("id",s).eq("user_id",null==r?void 0:r.id).single();a?(console.error("Erreur lors du chargement de la recette:",a),g(null)):g({...t,difficulty:["easy","medium","hard"].includes(null==t?void 0:t.difficulty)?t.difficulty:"medium",image_url:"string"==typeof(null==t?void 0:t.image_url)?t.image_url:""})}catch(e){console.error("Erreur:",e),g(null)}finally{j(!1)}};return v?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(d.F,{}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8 text-center",children:(0,t.jsx)("div",{children:"Chargement..."})})]}):p?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(d.F,{}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,t.jsxs)(i.$,{variant:"ghost",onClick:()=>s.push("/history"),className:"mb-6 flex items-center space-x-2",children:[(0,t.jsx)(o,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Retour"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.aR,{children:[p.image_url?(0,t.jsx)("img",{src:p.image_url,alt:p.title,className:"w-full h-64 object-cover rounded-t"}):(0,t.jsx)("div",{className:"w-full h-64 bg-gray-200 flex items-center justify-center rounded-t text-gray-500",children:"Aucune image"}),(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(l.ZB,{className:"text-3xl font-bold flex items-center space-x-3",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 text-primary"}),(0,t.jsx)("span",{children:p.title})]}),(0,t.jsx)(l.BT,{className:"text-lg mt-2",children:p.description})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-6 mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("span",{className:"text-sm",children:["Pr\xe9paration: ",p.prep_time," min"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("span",{className:"text-sm",children:["Cuisson: ",p.cook_time," min"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("span",{className:"text-sm",children:[p.servings," personnes"]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)("span",{className:"text-sm",children:[p.calories," kcal"]})}),(0,t.jsx)(c.E,{className:(e=>{switch(e){case"easy":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"hard":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})(p.difficulty),children:(e=>{switch(e){case"easy":return"Facile";case"medium":return"Moyen";case"hard":return"Difficile";default:return e}})(p.difficulty)})]}),(p.dietary_restrictions.length>0||p.allergens.length>0)&&(0,t.jsxs)("div",{className:"space-y-2 mt-4",children:[p.dietary_restrictions.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"R\xe9gimes:"}),p.dietary_restrictions.map(e=>(0,t.jsx)(c.E,{variant:"secondary",children:e},e))]}),p.allergens.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Allerg\xe8nes:"}),p.allergens.map(e=>(0,t.jsx)(c.E,{variant:"destructive",children:e},e))]})]})]})}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-xl",children:"Ingr\xe9dients"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("ul",{className:"space-y-2",children:p.ingredients.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),(0,t.jsx)("span",{children:e})]},s))})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-xl",children:"Instructions"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"prose prose-sm max-w-none",children:p.instructions.split(/\s*(?=\d+\.\s)/).filter(e=>""!==e.trim()).map((e,s)=>{let r=e.replace(/^\d+\.\s*/,"");return(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("span",{className:"flex items-center justify-center w-6 h-6 bg-primary text-primary-foreground text-xs font-bold rounded-full flex-shrink-0 mt-0.5",children:s+1}),(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:r})]})},s)})})})]})]}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsx)(i.$,{onClick:()=>s.push("/history"),children:"Voir mes autres recettes"}),(0,t.jsx)(i.$,{variant:"outline",onClick:()=>s.push("/search"),children:"Nouvelle recherche"})]})})})]})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(d.F,{}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8 text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Recette introuvable"}),(0,t.jsx)(i.$,{onClick:()=>s.push("/results"),children:"Retourner \xe0 la recherche"})]})]})}function v(){return(0,t.jsx)(p.O,{children:(0,t.jsx)(g,{})})}},9053:(e,s,r)=>{"use strict";r.d(s,{O:()=>l});var t=r(5155),a=r(2115),n=r(5695),i=r(4105);let l=e=>{let{children:s}=e,{user:r,loading:l}=(0,i.A)(),c=(0,n.useRouter)();return((0,a.useEffect)(()=>{l||r||c.push("/auth")},[r,l,c]),l)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):r?(0,t.jsx)(t.Fragment,{children:s}):null}},9434:(e,s,r)=>{"use strict";r.d(s,{cn:()=>n});var t=r(2596),a=r(9688);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.QP)((0,t.$)(s))}}},e=>{e.O(0,[225,105,441,964,358],()=>e(e.s=451)),_N_E=e.O()}]);