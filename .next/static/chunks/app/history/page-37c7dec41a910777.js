(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{69:(e,t,s)=>{"use strict";s.d(t,{supabase:()=>r});let r=(0,s(5647).UU)("https://uqyilcwzosapypgcchka.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVxeWlsY3d6b3NhcHlwZ2NjaGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNDc1MTAsImV4cCI6MjA2ODkyMzUxMH0.e9ollbywpv3ZH7laJVENWbkY8wNSs66N5rHg4wchvts",{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}})},285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155),a=s(2115),i=s(9708),n=s(2085),l=s(9434);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:d=!1,...o}=e,u=d?i.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:a,size:n,className:s})),ref:t,...o})});d.displayName="Button"},1689:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var r=s(2115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=[],c={toasts:[]};function d(e){c=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(c,e),l.forEach(e=>{e(c)})}function o(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=r.useState(c);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},4105:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,O:()=>l});var r=s(5155),a=s(2115),i=s(69);let n=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let{data:{subscription:e}}=i.supabase.auth.onAuthStateChange((e,t)=>{var s;d(t),l(null!=(s=null==t?void 0:t.user)?s:null),u(!1)});return i.supabase.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;d(s),l(null!=(t=null==s?void 0:s.user)?t:null),u(!1)}),()=>e.unsubscribe()},[]);let m=async(e,t)=>{let{error:s}=await i.supabase.auth.signInWithPassword({email:e,password:t});return{error:s}},x=async(e,t)=>{let s="".concat(window.location.origin,"/"),{error:r}=await i.supabase.auth.signUp({email:e,password:t,options:{emailRedirectTo:s}});return{error:r}},h=async()=>{await i.supabase.auth.signOut()};return(0,r.jsx)(n.Provider,{value:{user:s,session:c,loading:o,signIn:m,signUp:x,signOut:h},children:t})},c=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4186:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5155),a=s(2115),i=s(5695),n=s(285),l=s(6695),c=s(6126),d=s(5494),o=s(4105),u=s(69),m=s(9946);let x=(0,m.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),h=(0,m.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var p=s(4186),f=s(7580);let g=(0,m.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var v=s(744),y=s(1689),b=s(9053);function j(){let e=e=>{switch(e){case"easy":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"hard":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},t=async e=>{try{let{error:t}=await u.supabase.from("recipes").delete().eq("id",e).eq("user_id",null==k?void 0:k.id);t?_({title:"Erreur",description:"Impossible de supprimer la recette",variant:"destructive"}):(m(t=>t.filter(t=>t.id!==e)),_({title:"Succ\xe8s",description:"Recette supprim\xe9e"}))}catch(e){_({title:"Erreur",description:"Une erreur inattendue s'est produite",variant:"destructive"})}},[s,m]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[N,w]=(0,a.useState)(!0),{user:k}=(0,o.A)(),A=(0,i.useRouter)(),{toast:_}=(0,y.dj)();(0,a.useEffect)(()=>{k&&S()},[k]);let S=async()=>{try{let{data:e,error:t}=await u.supabase.from("recipes").select("*").eq("user_id",null==k?void 0:k.id).order("created_at",{ascending:!1});if(t)_({title:"Erreur",description:"Impossible de charger l'historique",variant:"destructive"});else{let t=(e||[]).map(e=>({...e,image_url:"string"==typeof e.image_url?e.image_url:"",difficulty:["easy","medium","hard"].includes(e.difficulty)?e.difficulty:"medium"}));j(t.filter(e=>e.is_favorite)),m(t.filter(e=>!e.is_favorite))}}catch(e){_({title:"Erreur",description:"Une erreur inattendue s'est produite",variant:"destructive"})}finally{w(!1)}},C=async(e,t)=>{try{let{error:s}=await u.supabase.from("recipes").update({is_favorite:!t}).eq("id",e).eq("user_id",null==k?void 0:k.id);s?_({title:"Erreur",description:"Impossible de mettre \xe0 jour le favori",variant:"destructive"}):(S(),_({title:t?"Retir\xe9 des favoris":"Ajout\xe9 aux favoris"}))}catch(e){_({title:"Erreur",description:"Une erreur inattendue s'est produite",variant:"destructive"})}},E=e=>{switch(e){case"easy":return"Facile";case"medium":return"Moyen";case"hard":return"Difficile";default:return e}},T=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return N?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(d.F,{}),(0,r.jsx)("div",{className:"max-w-6xl mx-auto py-8 px-6",children:(0,r.jsx)("div",{className:"text-center",children:"Chargement..."})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(d.F,{}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto py-8 px-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"Historique des recettes"}),(0,r.jsx)(n.$,{onClick:()=>A.push("/search"),children:"Nouvelle recherche"})]}),b.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Recettes favorites"}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-10",children:b.map(s=>(0,r.jsxs)(l.Zp,{className:"group relative border-2 border-pink-400",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)(l.ZB,{className:"text-xl leading-tight",children:s.title}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(c.E,{className:e(s.difficulty),children:E(s.difficulty)}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>t(s.id),className:"opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive",children:(0,r.jsx)(x,{className:"h-4 w-4"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>C(s.id,!0),className:"transition-opacity text-pink-500 hover:text-pink-700",children:(0,r.jsx)(h,{className:"h-4 w-4 fill-pink-500"})})]})]}),(0,r.jsx)(l.BT,{className:"line-clamp-2",children:s.description})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),s.prep_time+s.cook_time," min"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),s.servings," pers."]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[s.calories," kcal."]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-4",children:[(0,r.jsx)(g,{className:"h-4 w-4"}),T(s.created_at)]}),s.dietary_restrictions&&s.dietary_restrictions.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:s.dietary_restrictions.map(e=>(0,r.jsx)(c.E,{variant:"outline",className:"text-xs",children:e},e))}),(0,r.jsx)(n.$,{className:"w-full",onClick:()=>A.push("/recipe/".concat(s.id)),children:"Voir la recette"})]})]},s.id))})]}),0===s.length&&0===b.length?(0,r.jsx)(l.Zp,{className:"text-center py-12",children:(0,r.jsxs)(l.Wu,{children:[(0,r.jsx)(v.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Aucune recette encore"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"Commencez \xe0 g\xe9n\xe9rer des recettes pour les voir appara\xeetre ici."}),(0,r.jsx)(n.$,{onClick:()=>A.push("/search"),children:"Cr\xe9er ma premi\xe8re recette"})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Toutes les recettes"}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(s=>(0,r.jsxs)(l.Zp,{className:"group relative",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)(l.ZB,{className:"text-xl leading-tight",children:s.title}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(c.E,{className:e(s.difficulty),children:E(s.difficulty)}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>t(s.id),className:"opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive",children:(0,r.jsx)(x,{className:"h-4 w-4"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>C(s.id,!1),className:"transition-opacity text-muted-foreground hover:text-pink-500",children:(0,r.jsx)(h,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(l.BT,{className:"line-clamp-2",children:s.description})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),s.prep_time+s.cook_time," min"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),s.servings," pers."]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[s.calories," kcal."]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-4",children:[(0,r.jsx)(g,{className:"h-4 w-4"}),T(s.created_at)]}),s.dietary_restrictions&&s.dietary_restrictions.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:s.dietary_restrictions.map(e=>(0,r.jsx)(c.E,{variant:"outline",className:"text-xs",children:e},e))}),(0,r.jsx)(n.$,{className:"w-full",onClick:()=>A.push("/recipe/".concat(s.id)),children:"Voir la recette"})]})]},s.id))})]})]})]})}function N(){return(0,r.jsx)(b.O,{children:(0,r.jsx)(j,{})})}},5494:(e,t,s)=>{"use strict";s.d(t,{F:()=>h});var r=s(5155),a=s(6874),i=s.n(a),n=s(5695),l=s(285),c=s(4105),d=s(744),o=s(7924),u=s(9676),m=s(1007),x=s(4835);let h=()=>{let{signOut:e,user:t}=(0,c.A)(),s=(0,n.usePathname)(),a=[{path:"/",label:"Accueil",icon:d.A},{path:"/search",label:"Recherche",icon:o.A},{path:"/history",label:"Historique",icon:u.A},{path:"/profile",label:"Profil",icon:m.A}],h=async()=>{await e()};return(0,r.jsx)("nav",{className:"bg-card border-b border-border px-6 py-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,r.jsxs)(i(),{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsx)(d.A,{className:"h-8 w-8 text-primary"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-primary",children:"LS Kitchen"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[a.map(e=>{let{path:t,label:a,icon:n}=e;return(0,r.jsxs)(i(),{href:t,className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(s===t?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[(0,r.jsx)(n,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden md:inline",children:a})]},t)}),t?(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:h,className:"flex items-center space-x-2",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden md:inline",children:"D\xe9connexion"})]}):(0,r.jsx)(l.$,{variant:"outline",size:"sm",className:"flex items-center space-x-2",children:(0,r.jsxs)(i(),{href:"/auth",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden md:inline",children:"Connexion"})]})})]})]})})}},6126:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var r=s(5155);s(2115);var a=s(2085),i=s(9434);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)(n({variant:s}),t),...a})}},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>l});var r=s(5155),a=s(2115),i=s(9434);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},6868:(e,t,s)=>{Promise.resolve().then(s.bind(s,4440))},7580:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9053:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var r=s(5155),a=s(2115),i=s(5695),n=s(4105);let l=e=>{let{children:t}=e,{user:s,loading:l}=(0,n.A)(),c=(0,i.useRouter)();return((0,a.useEffect)(()=>{l||s||c.push("/auth")},[s,l,c]),l)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):s?(0,r.jsx)(r.Fragment,{children:t}):null}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{e.O(0,[225,105,441,964,358],()=>e(e.s=6868)),_N_E=e.O()}]);