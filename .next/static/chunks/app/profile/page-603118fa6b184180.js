(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{69:(e,t,r)=>{"use strict";r.d(t,{supabase:()=>s});let s=(0,r(5647).UU)("https://uqyilcwzosapypgcchka.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVxeWlsY3d6b3NhcHlwZ2NjaGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNDc1MTAsImV4cCI6MjA2ODkyMzUxMH0.e9ollbywpv3ZH7laJVENWbkY8wNSs66N5rHg4wchvts",{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}})},285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(5155),a=r(2115),i=r(9708),n=r(2085),l=r(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:a,size:n,className:r})),ref:t,...c})});d.displayName="Button"},1183:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var s=r(5155),a=r(2115),i=r(285),n=r(2523),l=r(9434);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});o.displayName="Textarea";var d=r(6695),c=r(6081),u=r(9033),m=r(2712),p=r(3655),f=r(1414);function h(){return()=>{}}var x="Avatar",[v,g]=(0,c.A)(x),[b,j]=v(x),y=a.forwardRef((e,t)=>{let{__scopeAvatar:r,...i}=e,[n,l]=a.useState("idle");return(0,s.jsx)(b,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,s.jsx)(p.sG.span,{...i,ref:t})})});y.displayName=x;var w="AvatarImage",N=a.forwardRef((e,t)=>{let{__scopeAvatar:r,src:i,onLoadingStatusChange:n=()=>{},...l}=e,o=j(w,r),d=function(e,t){let{referrerPolicy:r,crossOrigin:s}=t,i=(0,f.useSyncExternalStore)(h,()=>!0,()=>!1),n=a.useRef(null),l=i?(n.current||(n.current=new window.Image),n.current):null,[o,d]=a.useState(()=>A(l,e));return(0,m.N)(()=>{d(A(l,e))},[l,e]),(0,m.N)(()=>{let e=e=>()=>{d(e)};if(!l)return;let t=e("loaded"),a=e("error");return l.addEventListener("load",t),l.addEventListener("error",a),r&&(l.referrerPolicy=r),"string"==typeof s&&(l.crossOrigin=s),()=>{l.removeEventListener("load",t),l.removeEventListener("error",a)}},[l,s,r]),o}(i,l),c=(0,u.c)(e=>{n(e),o.onImageLoadingStatusChange(e)});return(0,m.N)(()=>{"idle"!==d&&c(d)},[d,c]),"loaded"===d?(0,s.jsx)(p.sG.img,{...l,ref:t,src:i}):null});N.displayName=w;var S="AvatarFallback",E=a.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:i,...n}=e,l=j(S,r),[o,d]=a.useState(void 0===i);return a.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>d(!0),i);return()=>window.clearTimeout(e)}},[i]),o&&"loaded"!==l.imageLoadingStatus?(0,s.jsx)(p.sG.span,{...n,ref:t}):null});function A(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}E.displayName=S;let R=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(y,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});R.displayName=y.displayName;let I=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(N,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",r),...a})});I.displayName=N.displayName;let k=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(E,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});k.displayName=E.displayName;var C=r(5494),_=r(4105),T=r(69),O=r(1689),M=r(1007);let L=(0,r(9946).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var z=r(1383),D=r(9053);function U(){var e,t;let{user:r}=(0,_.A)(),{toast:l}=(0,O.dj)(),[c,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(null),[f,h]=(0,a.useState)(""),[x,v]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!0),[j,y]=(0,a.useState)(null),w=(0,a.useCallback)(async()=>{try{let{data:e,error:t}=await T.supabase.from("profiles").select("*").eq("user_id",null==r?void 0:r.id).single();t?console.error("Erreur lors du chargement du profil:",t):(u(e),h((null==e?void 0:e.bio)||""))}catch(e){console.error("Erreur:",e)}finally{b(!1)}},[null==r?void 0:r.id]),N=(0,a.useCallback)(async()=>{try{let{data:e,error:t}=await T.supabase.from("recipes").select("ingredients, created_at, title, description").eq("user_id",null==r?void 0:r.id);if(t)return void console.error("Erreur lors du chargement des statistiques:",t);let s=(null==e?void 0:e.length)||0,a=new Date;a.setDate(a.getDate()-7);let i=(null==e?void 0:e.filter(e=>new Date(e.created_at)>a).length)||0,n=(null==e?void 0:e.flatMap(e=>e.ingredients||[]))||[],l=new Set(n),o=S(e||[]);p({totalRecipes:s,thisWeekRecipes:i,uniqueIngredients:l,favoritesCuisines:o})}catch(e){console.error("Erreur lors du chargement des statistiques:",e)}},[null==r?void 0:r.id]);(0,a.useEffect)(()=>{r&&(w(),N())},[r,w,N]),(0,a.useEffect)(()=>()=>{j&&URL.revokeObjectURL(j)},[j]);let S=e=>{let t={Asiatique:["soja","gingembre","sesame","miso","nori","wasabi","sake","mirin","shiitake","riz","nouilles","wok","curry","coco","citronnelle","sauce soja","pad thai","ramen","sushi"],Italienne:["basilic","mozzarella","parmesan","tomate","p\xe2tes","pizza","risotto","olive","prosciutto","pesto","gorgonzola","mascarpone","pancetta","penne","spaghetti","lasagne","gnocchi"],Française:["beurre","cr\xe8me","vin","champagne","brie","camembert","foie gras","escargot","coq au vin","ratatouille","bouillabaisse","croissant","baguette","\xe9chalote","cognac"],Mexicaine:["avocat","lime","coriandre","piment","haricots","tortilla","salsa","guacamole","chili","cumin","paprika","jalape\xf1o","tequila","quinoa","ma\xefs"],Méditerranéenne:["huile d'olive","thym","romarin","origan","feta","olives","citron","ail","aubergine","courgette","poivron","tahini","houmous","tzatziki"],Indienne:["curry","curcuma","cardamome","coriandre","cumin","garam masala","ghee","naan","basmati","lentilles","pois chiches","masala","tandoori","paneer"],"Moyen-Oriental":["sumac","za'atar","tahini","pistache","grenade","bulgur","freekeh","halloumi","labneh","harissa","ras el hanout","couscous","agneau"]},r={};return e.forEach(e=>{var s;let a="".concat(e.title," ").concat(e.description," ").concat(null==(s=e.ingredients)?void 0:s.join(" ")).toLowerCase();Object.entries(t).forEach(e=>{let[t,s]=e,i=s.reduce((e,t)=>e+ +!!a.includes(t.toLowerCase()),0);r[t]=(r[t]||0)+i})}),Object.entries(r).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r}).slice(0,3).filter(e=>{let[,t]=e;return t>0}).map(e=>{let[t]=e;return t})},E=async()=>{if(!r)return;let e=(0,z.kb)(f,0,500);if(!e.isValid)return void l({title:"Erreur",description:e.error,variant:"destructive"});let t=(0,z.jZ)(f,500);try{let{error:e}=await T.supabase.from("profiles").update({bio:t,avatar_url:null==c?void 0:c.avatar_url,updated_at:new Date().toISOString()}).eq("user_id",null==r?void 0:r.id);e?(console.error("Erreur Supabase lors de l'upsert de la bio:",e),l({title:"Erreur",description:"Impossible de mettre \xe0 jour la bio",variant:"destructive"})):(l({title:"Succ\xe8s",description:"Bio mise \xe0 jour avec succ\xe8s"}),await w())}catch(e){console.error("Erreur inattendue lors de la mise \xe0 jour de la bio:",e),l({title:"Erreur",description:"Une erreur inattendue s'est produite",variant:"destructive"})}},A=async e=>{try{v(!0),j&&URL.revokeObjectURL(j);let t=e.name.split(".").pop(),s="".concat(null==r?void 0:r.id,"-").concat(Date.now(),".").concat(t),a="avatars/".concat(s),{error:i}=await T.supabase.storage.from("avatars").upload(a,e,{cacheControl:"3600",upsert:!1});if(i){console.error("Erreur Supabase lors du t\xe9l\xe9versement de l'avatar:",i),console.warn("Storage upload failed, using fallback method:",i);let t=new FileReader;t.onload=async e=>{var t;let s=null==(t=e.target)?void 0:t.result,{error:a}=await T.supabase.from("profiles").upsert({user_id:null==r?void 0:r.id,avatar_url:s,updated_at:new Date().toISOString()});if(a)throw console.error("Erreur Supabase lors de la mise \xe0 jour du profil avec l'avatar en base64:",a),a;y(null),l({title:"Succ\xe8s",description:"Avatar mis \xe0 jour avec succ\xe8s"}),await w()},t.readAsDataURL(e);return}let{data:n}=T.supabase.storage.from("avatars").getPublicUrl(a);if(console.log("Avatar public URL:",n.publicUrl),!n.publicUrl)throw Error("Impossible d'obtenir l'URL publique de l'avatar");let{error:o}=await T.supabase.from("profiles").upsert({user_id:null==r?void 0:r.id,avatar_url:n.publicUrl,updated_at:new Date().toISOString()},{onConflict:"user_id"});if(o)throw console.error("Erreur Supabase lors de la mise \xe0 jour de l'URL de l'avatar:",o),o;y(null),l({title:"Succ\xe8s",description:"Avatar mis \xe0 jour avec succ\xe8s"}),await w()}catch(e){console.error("Erreur lors du t\xe9l\xe9versement de l'avatar:",e),y(null),l({title:"Erreur",description:e.message||"Erreur lors de l'upload",variant:"destructive"})}finally{v(!1)}};return g?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(C.F,{}),(0,s.jsx)("div",{className:"max-w-4xl mx-auto py-8 px-6",children:(0,s.jsx)("div",{className:"text-center",children:"Chargement..."})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(C.F,{}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto py-8 px-6",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-8",children:"Mon Profil"}),(0,s.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,s.jsxs)(d.Zp,{children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsx)(d.ZB,{children:"Informations personnelles"}),(0,s.jsx)(d.BT,{children:"G\xe9rez vos informations de profil"})]}),(0,s.jsxs)(d.Wu,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(R,{className:"h-20 w-20",children:[(0,s.jsx)(I,{src:j||(null==c?void 0:c.avatar_url)}),(0,s.jsx)(k,{children:(0,s.jsx)(M.A,{className:"h-10 w-10"})})]}),x&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.p,{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r&&1){if(!r.type.startsWith("image/"))return void l({title:"Erreur",description:"Le fichier doit \xeatre une image",variant:"destructive"});if(r.size>2097152)return void l({title:"Erreur",description:"L'image ne doit pas d\xe9passer 2MB",variant:"destructive"});y(URL.createObjectURL(r)),A(r)}},disabled:x,className:"hidden",id:"avatar-upload"}),(0,s.jsx)("label",{htmlFor:"avatar-upload",children:(0,s.jsx)(i.$,{variant:"outline",disabled:x,asChild:!0,children:(0,s.jsxs)("span",{className:"cursor-pointer",children:[(0,s.jsx)(L,{className:"mr-2 h-4 w-4"}),x?"T\xe9l\xe9chargement...":"Changer d'avatar"]})})}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG jusqu\\'\xe0 2MB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Email"}),(0,s.jsx)(n.p,{value:(null==r?void 0:r.email)||"",disabled:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Bio"}),(0,s.jsx)(o,{placeholder:"Parlez-nous de vous...",value:f,onChange:e=>h(e.target.value),rows:4,maxLength:500}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[f.length,"/500 caract\xe8res"]})]}),(0,s.jsx)(i.$,{onClick:E,children:"Mettre \xe0 jour la bio"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(d.Zp,{children:[(0,s.jsx)(d.aR,{children:(0,s.jsx)(d.ZB,{children:"Cr\xe9dits"})}),(0,s.jsx)(d.Wu,{children:(0,s.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:null!=(t=null==c?void 0:c.credits)?t:10}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Cr\xe9dits restants"})]})})]}),(0,s.jsxs)(d.Zp,{children:[(0,s.jsx)(d.aR,{children:(0,s.jsx)(d.ZB,{children:"Mes statistiques"})}),(0,s.jsxs)(d.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:(null==m?void 0:m.totalRecipes)||0}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Recettes cr\xe9\xe9es"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:(null==m?void 0:m.thisWeekRecipes)||0}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:(null==m||null==(e=m.uniqueIngredients)?void 0:e.size)||0}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Ingr\xe9dients uniques utilis\xe9s"})]})]})]}),(0,s.jsxs)(d.Zp,{children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsx)(d.ZB,{children:"Pr\xe9f\xe9rences culinaires"}),(0,s.jsx)(d.BT,{children:"Bas\xe9es sur vos recettes g\xe9n\xe9r\xe9es"})]}),(0,s.jsx)(d.Wu,{children:(null==m?void 0:m.favoritesCuisines)&&m.favoritesCuisines.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:m.favoritesCuisines.map((e,t)=>(0,s.jsxs)("div",{className:"px-3 py-2 rounded-full text-sm font-medium ".concat(0===t?"bg-primary text-primary-foreground":1===t?"bg-secondary text-secondary-foreground":"bg-muted text-muted-foreground"),children:["#",t+1," ",e]},e))}):(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"G\xe9n\xe9rez plus de recettes pour d\xe9couvrir vos pr\xe9f\xe9rences culinaires !"})})]})]})]})]})]})}function P(){return(0,s.jsx)(D.O,{children:(0,s.jsx)(U,{})})}},1383:(e,t,r)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return"string"!=typeof e?"":e.trim().slice(0,t).replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"")}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;if("string"!=typeof e)return{isValid:!1,error:"Input must be text"};let s=e.trim();if(s.length<t)return{isValid:!1,error:"Text must be at least ".concat(t," characters")};if(s.length>r)return{isValid:!1,error:"Text must be less than ".concat(r," characters")};for(let t of[/<script/i,/javascript:/i,/on\w+=/i,/data:text\/html/i])if(t.test(e))return{isValid:!1,error:"Invalid characters detected"};return{isValid:!0}}r.d(t,{jZ:()=>s,kb:()=>a,v$:()=>i});class i{canAttempt(e){let t=Date.now(),r=(this.attempts.get(e)||[]).filter(e=>t-e<this.windowMs);return!(r.length>=this.maxAttempts)&&(r.push(t),this.attempts.set(e,r),!0)}reset(e){this.attempts.delete(e)}constructor(e=5,t=6e4){this.maxAttempts=e,this.windowMs=t,this.attempts=new Map}}},1414:(e,t,r)=>{"use strict";e.exports=r(2436)},1689:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var s=r(2115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=[],o={toasts:[]};function d(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),l.forEach(e=>{e(o)})}function c(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=s.useState(o);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},2209:(e,t,r)=>{Promise.resolve().then(r.bind(r,1183))},2436:(e,t,r)=>{"use strict";var s=r(2115),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=s.useState,n=s.useEffect,l=s.useLayoutEffect,o=s.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=i({inst:{value:r,getSnapshot:t}}),a=s[0].inst,c=s[1];return l(function(){a.value=r,a.getSnapshot=t,d(a)&&c({inst:a})},[e,r,t]),n(function(){return d(a)&&c({inst:a}),e(function(){d(a)&&c({inst:a})})},[e]),o(r),r};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:c},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(5155),a=r(2115),i=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},2712:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var s=r(2115),a=globalThis?.document?s.useLayoutEffect:()=>{}},3655:(e,t,r)=>{"use strict";r.d(t,{hO:()=>o,sG:()=>l});var s=r(2115),a=r(7650),i=r(9708),n=r(5155),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.TL)(`Primitive.${t}`),a=s.forwardRef((e,s)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(a?r:t,{...i,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function o(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},4105:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,O:()=>l});var s=r(5155),a=r(2115),i=r(69);let n=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[o,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let{data:{subscription:e}}=i.supabase.auth.onAuthStateChange((e,t)=>{var r;d(t),l(null!=(r=null==t?void 0:t.user)?r:null),u(!1)});return i.supabase.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;d(r),l(null!=(t=null==r?void 0:r.user)?t:null),u(!1)}),()=>e.unsubscribe()},[]);let m=async(e,t)=>{let{error:r}=await i.supabase.auth.signInWithPassword({email:e,password:t});return{error:r}},p=async(e,t)=>{let r="".concat(window.location.origin,"/"),{error:s}=await i.supabase.auth.signUp({email:e,password:t,options:{emailRedirectTo:r}});return{error:s}},f=async()=>{await i.supabase.auth.signOut()};return(0,s.jsx)(n.Provider,{value:{user:r,session:o,loading:c,signIn:m,signUp:p,signOut:f},children:t})},o=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5494:(e,t,r)=>{"use strict";r.d(t,{F:()=>f});var s=r(5155),a=r(6874),i=r.n(a),n=r(5695),l=r(285),o=r(4105),d=r(744),c=r(7924),u=r(9676),m=r(1007),p=r(4835);let f=()=>{let{signOut:e,user:t}=(0,o.A)(),r=(0,n.usePathname)(),a=[{path:"/",label:"Accueil",icon:d.A},{path:"/search",label:"Recherche",icon:c.A},{path:"/history",label:"Historique",icon:u.A},{path:"/profile",label:"Profil",icon:m.A}],f=async()=>{await e()};return(0,s.jsx)("nav",{className:"bg-card border-b border-border px-6 py-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,s.jsxs)(i(),{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)(d.A,{className:"h-8 w-8 text-primary"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-primary",children:"LS Kitchen"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[a.map(e=>{let{path:t,label:a,icon:n}=e;return(0,s.jsxs)(i(),{href:t,className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(r===t?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[(0,s.jsx)(n,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden md:inline",children:a})]},t)}),t?(0,s.jsxs)(l.$,{variant:"outline",size:"sm",onClick:f,className:"flex items-center space-x-2",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden md:inline",children:"D\xe9connexion"})]}):(0,s.jsx)(l.$,{variant:"outline",size:"sm",className:"flex items-center space-x-2",children:(0,s.jsxs)(i(),{href:"/auth",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden md:inline",children:"Connexion"})]})})]})]})})}},6081:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2115),a=r(5155);function i(e,t=[]){let r=[],n=()=>{let t=r.map(e=>s.createContext(e));return function(r){let a=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return n.scopeName=e,[function(t,i){let n=s.createContext(i),l=r.length;r=[...r,i];let o=t=>{let{scope:r,children:i,...o}=t,d=r?.[e]?.[l]||n,c=s.useMemo(()=>o,Object.values(o));return(0,a.jsx)(d.Provider,{value:c,children:i})};return o.displayName=t+"Provider",[o,function(r,a){let o=a?.[e]?.[l]||n,d=s.useContext(o);if(d)return d;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(n,...t)]}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l});var s=r(5155),a=r(2115),i=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},9033:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var s=r(2115);function a(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}},9053:(e,t,r)=>{"use strict";r.d(t,{O:()=>l});var s=r(5155),a=r(2115),i=r(5695),n=r(4105);let l=e=>{let{children:t}=e,{user:r,loading:l}=(0,n.A)(),o=(0,i.useRouter)();return((0,a.useEffect)(()=>{l||r||o.push("/auth")},[r,l,o]),l)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):r?(0,s.jsx)(s.Fragment,{children:t}):null}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2596),a=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{e.O(0,[225,105,441,964,358],()=>e(e.s=2209)),_N_E=e.O()}]);